% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/calculate_implied_hospital_transmission_share.R
\name{calculate_implied_hospital_transmission_share_hcw_separate}
\alias{calculate_implied_hospital_transmission_share_hcw_separate}
\title{Implied hospital transmission share for HCW parents with distinct pre- and post-admission thinning}
\usage{
calculate_implied_hospital_transmission_share_hcw_separate(
  p_hosp,
  shape_h,
  rate_h,
  shape_out,
  rate_out,
  gt_shape,
  gt_rate,
  prob_hospital_cond_hcw_preAdm,
  ppe_efficacy_hcw,
  hospital_quarantine_efficacy,
  n = 20000,
  seed = NULL
)
}
\arguments{
\item{p_hosp}{Numeric in \code{[0,1]}. Probability a parent is hospitalised.}

\item{shape_h, rate_h}{Positive numerics. Gamma(shape = \code{shape_h}, rate = \code{rate_h})
for the time to hospitalisation (when hospitalised).}

\item{shape_out, rate_out}{Positive numerics. Gamma(shape = \code{shape_out}, rate = \code{rate_out})
for the time to outcome (death/recovery).}

\item{gt_shape, gt_rate}{Positive numerics. Gamma parameters for the generation time.}

\item{prob_hospital_cond_hcw_preAdm}{Numeric in \code{[0,1]}. Probability that a \strong{pre-admission}
candidate infection occurs in the \strong{hospital} setting (while the HCW is working).}

\item{ppe_efficacy_hcw}{Numeric in \code{[0,1]}. Efficacy of PPE/IPC at reducing \strong{pre-admission
hospital} transmission; pre-admission hospital keep-probability is \code{1 - ppe_efficacy_hcw}.
May be a scalar or a numeric vector.}

\item{hospital_quarantine_efficacy}{Numeric in \code{[0,1]}. Efficacy of \strong{post-admission hospital}
quarantine at reducing transmission; post-admission hospital keep-probability is
\code{1 - hospital_quarantine_efficacy}. May be a scalar or a numeric vector.}

\item{n}{Integer \eqn{\ge} 1. Number of Monte Carlo parent draws.}

\item{seed}{Optional integer for reproducibility passed to \code{set.seed()}.}
}
\description{
Computes the \strong{expected fraction} of transmissions that occur in hospital
(among retained/kept events) for \strong{healthcare-worker (HCW)} parents when
community keep-probability is fixed at 1, but \strong{hospital keep-probabilities
differ pre- vs post-admission}. Times to hospitalisation and outcome are
assumed \strong{independent} and Gamma-distributed; the generation time (GT) is
also Gamma-distributed. The expectation is evaluated by Monte Carlo over the
parent population.
}
\details{
For a given parent, let \eqn{q_{\mathrm{pre}} = \Pr(T \le t_{\mathrm{hosp}} \mid T \le t_{\mathrm{out}})}
and \eqn{q_{\mathrm{post}} = 1 - q_{\mathrm{pre}}}. Pre-admission candidate mass splits by the HCW
workplace probability \eqn{p_{\mathrm{preHosp}}}:
\eqn{q_{\mathrm{pre,h}} = p_{\mathrm{preHosp}} q_{\mathrm{pre}}}, \eqn{q_{\mathrm{pre,c}} = (1-p_{\mathrm{preHosp}}) q_{\mathrm{pre}}}.
Post-admission candidates are always hospital: \eqn{q_{\mathrm{post,h}} = q_{\mathrm{post}}}.
With community keep = 1, pre-admission hospital keep \eqn{k_{\mathrm{pre}} = 1 - \mathrm{ppe\_efficacy\_hcw}},
and post-admission hospital keep \eqn{k_{\mathrm{post}} = 1 - \mathrm{hospital\_quarantine\_efficacy}}, the
hospital share among kept events for that parent is
\deqn{f(k_{\mathrm{pre}}, k_{\mathrm{post}}) =
\frac{k_{\mathrm{pre}}\,q_{\mathrm{pre,h}} + k_{\mathrm{post}}\,q_{\mathrm{post,h}}}
     {q_{\mathrm{pre,c}} + k_{\mathrm{pre}}\,q_{\mathrm{pre,h}} + k_{\mathrm{post}}\,q_{\mathrm{post,h}}}.}
This function estimates \eqn{\Pi = E[f(k_{\mathrm{pre}}, k_{\mathrm{post}})]} across parents.
}
